receivers:
  tracesimulationreceiver:
    ## @param global - object - required
    ## Global settings that apply to all traces generated by the receiver.
    global:
      ## @param interval - duration - optional
      ## Interval at which traces are generated, must be greater than 0.
      ## Default: 5s
      interval: 5s
    ## @param blueprint - object - required
    ## Blueprint that defines the structure of the traces to be simulated.
    blueprint:
      ## @param type - string - required
      ## Type of blueprint. 'service' defines services and tasks under them.
      type: service
      ## @param service - object - required if type=service
      ## Configuration for services participating in the simulation.
      service:
        ## @param default - object - optional
        ## Default wait time and duration for tasks if not specified individually.
        default:
          ## @param delay - object - optional
          ## Default wait time before starting a task
          delay:
            ## @param for - string - optional
            ## Default wait time in the format of either
            ## - duration (e.g., 1s, 2m), must be greater than or equal to 0.
            ## - float (e.g., 0.5 for 50% of the parent task duration), must be greater than or equal to 0 and cannot be set for root tasks.
            for: 10ms
            ## @param as - string - optional
            ## Type of delay. Can be 'absolute' or 'relative'.
            as: absolute
          ## @param duration - duration - optional
          ## Default duration of the task, must be greater than 0.
          duration:
            ## @param for - string - optional
            ## Default duration in the format of either
            ## - duration (e.g., 1s, 2m), must be greater than 0.
            ## - float (e.g., 0.5 for 50% of the parent task duration), must be greater than 0 and cannot be set for root tasks.
            for: "0.8"
            ## @param as - string - optional
            ## Type of duration. Can be 'absolute' or 'relative'.
            as: relative
          ## @param failWith - object - optional
          ## Default configuration for simulating task failures.
          failWith:
            ## @param failWithProbability - float - optional
            ## Probability of the task failing (0.0 to 1.0).
            probability: 0.5
        ## @param services - list of objects - required
        ## List of services, each representing a simulated application or system component.
        services:
          ## @param name - string - required
          ## Name of the service. This is a unique identifier for the service.
          - name: client
            ## @param resource - map of key/value pairs - optional
            ## Resource attributes associated with the service (e.g., OS, instance ID, region).
            resource:
              os: android
            ## @param tasks - list of objects - required
            ## Tasks performed by the service, each representing a span.
            tasks:
              ## @param name - string - required
              ## Name of the task.
              - name: send_request
                ## @param id - string - optional
                ## Unique identifier for the task (used for child/linked relationships and span links)
                ## Must match the regex `^[a-zA-Z0-9_-]+$`.
                id: send_request
                ## @param delay - object - optional if default.delay is set
                ## Wait time before starting a task.
                delay:
                  ## @param for - string - optional if default.delay.for is set
                  ## Wait time in one of the following formats:
                  ## - Duration: e.g., 1s, 2m (must be greater than or equal to 0).
                  ## - Float: e.g., 0.5 (50% of the parent task duration, must be greater than or equal to 0 and cannot be set for root tasks).
                  for: 0s
                  ## @param as - string - optional if default.delay.as is set
                  ## Type of delay. Can be one of:
                  ## - 'absolute': Specifies a fixed delay.
                  ## - 'relative': Specifies a delay relative to the parent task.
                  as: absolute
                ## @param duration - duration - optional if default.duration is set
                ## Default duration of the task, must be greater than 0.
                duration:
                  ## @param for - string - optional if default.duration.for is set
                  ## Default duration in one of the following formats:
                  ## - Absolute: duration (e.g., 1s, 2m), must be greater than 0.
                  ## - Relative: float (e.g., 0.5 for 50% of the parent task duration), must be greater than 0 and cannot be set for root tasks.
                  ## Root tasks must specify an absolute duration.
                  for: 1s
                  ## @param as - string - optional if default.duration.as is set
                  ## Type of duration. Can be one of:
                  ## - 'absolute': Specifies a fixed duration.
                  ## - 'relative': Specifies a duration relative to the parent task.
                  ## Root tasks must specify an absolute duration.
                  as: absolute
                ## @param kind - string - optional
                ## Kind of the task. Can be 'client', 'server', 'producer', 'consumer', or 'internal'.
                kind: client
                ## @param attributes - map of key/value pairs - optional
                ## Attributes associated with the service (e.g., version, environment).
                attributes:
                  team: mobile
          - name: server
            resource:
              service.version: 1.1.0
            tasks:
              - name: accept_request
                ## @param childOf - string - optional
                ## The id of the task that this task is a child of.
                ## You can use this to create a parent-child relationship between tasks
                childOf: send_request
                ## @param failWith - object - optional if default.failWith is set
                ## Configuration for simulating task failures.
                failWith:
                  ## @param failWithProbability - float - optional if default.failWith is set
                  ## Probability of the task failing (0.0 to 1.0).
                  probability: 1.0
                kind: server
                ## @param children - list of objects - optional
                ## List of child tasks that are executed after the parent task.
                children:
                  - name: produce_message_event
                    id: produce_message_event
                    kind: producer
                    duration:
                      for: "0.3"
                    failWith:
                      probability: 0.2
          - name: consumer
            tasks:
              - name: consume_message_event
                duration:
                  for: 200ms
                  as: absolute
                kind: consumer
                ## @param linkedTo - list of strings - optional
                ## List of task ids that this task is linked to.
                linkedTo:
                  - produce_message_event
                children:
                  - name: process_message_event
                    kind: internal

exporters:
  debug:
    verbosity: detailed

service:
  pipelines:
    traces:
      receivers: [ tracesimulationreceiver ]
      processors: [ ]
      exporters: [ debug ]
